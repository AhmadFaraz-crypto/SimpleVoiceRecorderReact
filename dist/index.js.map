{"version":3,"file":"index.js","sources":["../src/components/useRecorder.js","../src/components/Recorder.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst useRecorder = () => {\n  const [audioURL, setAudioURL] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n  const [recorder, setRecorder] = useState(null);\n\n  useEffect(() => {\n    // Lazily obtain recorder first time we're recording.\n    if (recorder === null) {\n      if (isRecording) {\n        requestRecorder().then(setRecorder, console.error);\n      }\n      return;\n    }\n\n    // Manage recorder state.\n    if (recorder) {\n      if (isRecording) {\n        recorder.start();\n      } else {\n        recorder.stop();\n      }\n    }\n\n    // Obtain the audio when ready.\n    const handleData = (e) => {\n      setAudioURL(URL.createObjectURL(e.data));\n    };\n\n    recorder.addEventListener(\"dataavailable\", handleData);\n    return () => recorder.removeEventListener(\"dataavailable\", handleData);\n  }, [recorder, isRecording]);\n\n  const startRecording = () => {\n    setIsRecording(true);\n  };\n\n  const stopRecording = () => {\n    setIsRecording(false);\n  };\n\n  return [audioURL, isRecording, startRecording, stopRecording];\n};\n\nasync function requestRecorder() {\n  const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n  return new MediaRecorder(stream);\n}\nexport default useRecorder;\n","import React, { useState, useEffect } from \"react\";\nimport useRecorder from \"./useRecorder\";\nimport styles from '../styles.module.css';\n\nconst Recorder = ({\n  blobUrl,\n  showAudioPlayUI = true,\n  title = \"\",\n  className = \"\",\n  hideAudioTitle = false,\n  status,\n}) => {\n  const [audioURL, isRecording, startRecording, stopRecording] = useRecorder();\n  const [seconds, setSeconds] = useState(0);\n  const [minutes, setMinutes] = useState(0);\n  const [start, setStart] = useState(false);\n  const [audioBlob, setAudioBlob] = useState(\"\");\n\n  useEffect(() => {\n    if (start) {\n      if (minutes <= 60) {\n        if (seconds >= 0 && seconds <= 29) {\n          setTimeout(() => {\n            if (seconds + 1 === 60) {\n              setSeconds(0);\n              setMinutes(minutes + 1);\n            } else {\n              setSeconds(seconds + 1);\n            }\n          }, 1000);\n        } else {\n          setSeconds(0);\n          setMinutes(0);\n          stopRecording();\n        }\n      } else if (minutes >= 60) {\n        handleRecording();\n        console.log(\"You can record only 60 minutes audio.\");\n      }\n    } else {\n      setSeconds(0);\n      setMinutes(0);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [seconds, start]);\n\n  const handleRecording = () => {\n    if (isRecording) {\n      setStart(false);\n      stopRecording();\n      status && status(\"Progress\");\n    } else {\n      startRecording();\n      setStart(true);\n      status && status(\"Recording\");\n    }\n  };\n\n  console.log(\"seconds\", seconds);\n\n  useEffect(() => {\n    if (audioURL) {\n      status && status(\"Completed\");\n      setAudioBlob(audioURL);\n      blobUrl && blobUrl(audioURL);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [audioURL]);\n\n  return (\n    <div className={`${styles.container} ${className}`}>\n      {!hideAudioTitle && <h3>{title ? title : \"Audio Recorder\"}</h3>}\n      <div className={`${styles.counter}`}>\n        {\" \"}\n        {`${minutes < 10 ? `0${minutes}` : minutes}:${\n          seconds < 10 ? `0${seconds}` : seconds\n        }`}\n      </div>\n      <div className={`${styles.recordingBtn}`}>\n        {showAudioPlayUI && (\n          <div className={`${styles.audioPlay}`}>\n            {audioBlob && (\n              <audio controls>\n                <source src={audioBlob} />\n              </audio>\n            )}\n          </div>\n        )}\n        <button\n          type=\"button\"\n          onClick={() => handleRecording()}\n        >\n          {!isRecording ? \"Start Recording\" : \"Stop Recording\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Recorder;\n"],"names":["requestRecorder","navigator","mediaDevices","getUserMedia","audio","stream","MediaRecorder","useRecorder","useState","audioURL","setAudioURL","isRecording","setIsRecording","recorder","setRecorder","useEffect","then","console","error","start","stop","handleData","e","URL","createObjectURL","data","addEventListener","removeEventListener","startRecording","stopRecording","Recorder","blobUrl","showAudioPlayUI","title","className","hideAudioTitle","status","seconds","setSeconds","minutes","setMinutes","setStart","audioBlob","setAudioBlob","setTimeout","handleRecording","log","React","styles","container","counter","recordingBtn","audioPlay"],"mappings":";;;;;IA6CeA,2BAAAA;MAAkB;IAAA,uBACVC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;MAAEC,KAAK,EAAE;KAA7C,CADU,iBACzBC,MADyB;MAE/B,OAAO,IAAIC,aAAJ,CAAkBD,MAAlB,CAAP;;;;;;;AA7CF,IAAME,WAAW,GAAG,SAAdA,WAAc,GAAM;EACxB,gBAAgCC,cAAQ,CAAC,EAAD,CAAxC;MAAOC,QAAP;MAAiBC,WAAjB;;EACA,iBAAsCF,cAAQ,CAAC,KAAD,CAA9C;MAAOG,WAAP;MAAoBC,cAApB;;EACA,iBAAgCJ,cAAQ,CAAC,IAAD,CAAxC;MAAOK,QAAP;MAAiBC,WAAjB;;EAEAC,eAAS,CAAC,YAAM;IAEd,IAAIF,QAAQ,KAAK,IAAjB,EAAuB;MACrB,IAAIF,WAAJ,EAAiB;QACfX,eAAe,GAAGgB,IAAlB,CAAuBF,WAAvB,EAAoCG,OAAO,CAACC,KAA5C;;;MAEF;;;IAIF,IAAIL,QAAJ,EAAc;MACZ,IAAIF,WAAJ,EAAiB;QACfE,QAAQ,CAACM,KAAT;OADF,MAEO;QACLN,QAAQ,CAACO,IAAT;;;;IAKJ,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,CAAD,EAAO;MACxBZ,WAAW,CAACa,GAAG,CAACC,eAAJ,CAAoBF,CAAC,CAACG,IAAtB,CAAD,CAAX;KADF;;IAIAZ,QAAQ,CAACa,gBAAT,CAA0B,eAA1B,EAA2CL,UAA3C;IACA,OAAO;MAAA,OAAMR,QAAQ,CAACc,mBAAT,CAA6B,eAA7B,EAA8CN,UAA9C,CAAN;KAAP;GAxBO,EAyBN,CAACR,QAAD,EAAWF,WAAX,CAzBM,CAAT;;EA2BA,IAAMiB,cAAc,GAAG,SAAjBA,cAAiB,GAAM;IAC3BhB,cAAc,CAAC,IAAD,CAAd;GADF;;EAIA,IAAMiB,aAAa,GAAG,SAAhBA,aAAgB,GAAM;IAC1BjB,cAAc,CAAC,KAAD,CAAd;GADF;;EAIA,OAAO,CAACH,QAAD,EAAWE,WAAX,EAAwBiB,cAAxB,EAAwCC,aAAxC,CAAP;AACD,CAzCD;;;;ACEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAOX;EAAA,IANJC,OAMI,QANJA,OAMI;kCALJC,eAKI;MALJA,eAKI,qCALc,IAKd;wBAJJC,KAII;MAJJA,KAII,2BAJI,EAIJ;4BAHJC,SAGI;MAHJA,SAGI,+BAHQ,EAGR;iCAFJC,cAEI;MAFJA,cAEI,oCAFa,KAEb;MADJC,MACI,QADJA,MACI;;EACJ,mBAA+D7B,WAAW,EAA1E;MAAOE,QAAP;MAAiBE,WAAjB;MAA8BiB,cAA9B;MAA8CC,aAA9C;;EACA,gBAA8BrB,cAAQ,CAAC,CAAD,CAAtC;MAAO6B,OAAP;MAAgBC,UAAhB;;EACA,iBAA8B9B,cAAQ,CAAC,CAAD,CAAtC;MAAO+B,OAAP;MAAgBC,UAAhB;;EACA,iBAA0BhC,cAAQ,CAAC,KAAD,CAAlC;MAAOW,KAAP;MAAcsB,QAAd;;EACA,iBAAkCjC,cAAQ,CAAC,EAAD,CAA1C;MAAOkC,SAAP;MAAkBC,YAAlB;;EAEA5B,eAAS,CAAC,YAAM;IACd,IAAII,KAAJ,EAAW;MACT,IAAIoB,OAAO,IAAI,EAAf,EAAmB;QACjB,IAAIF,OAAO,IAAI,CAAX,IAAgBA,OAAO,IAAI,EAA/B,EAAmC;UACjCO,UAAU,CAAC,YAAM;YACf,IAAIP,OAAO,GAAG,CAAV,KAAgB,EAApB,EAAwB;cACtBC,UAAU,CAAC,CAAD,CAAV;cACAE,UAAU,CAACD,OAAO,GAAG,CAAX,CAAV;aAFF,MAGO;cACLD,UAAU,CAACD,OAAO,GAAG,CAAX,CAAV;;WALM,EAOP,IAPO,CAAV;SADF,MASO;UACLC,UAAU,CAAC,CAAD,CAAV;UACAE,UAAU,CAAC,CAAD,CAAV;UACAX,aAAa;;OAbjB,MAeO,IAAIU,OAAO,IAAI,EAAf,EAAmB;QACxBM,eAAe;QACf5B,OAAO,CAAC6B,GAAR,CAAY,uCAAZ;;KAlBJ,MAoBO;MACLR,UAAU,CAAC,CAAD,CAAV;MACAE,UAAU,CAAC,CAAD,CAAV;;GAvBK,EA0BN,CAACH,OAAD,EAAUlB,KAAV,CA1BM,CAAT;;EA4BA,IAAM0B,eAAe,GAAG,SAAlBA,eAAkB,GAAM;IAC5B,IAAIlC,WAAJ,EAAiB;MACf8B,QAAQ,CAAC,KAAD,CAAR;MACAZ,aAAa;MACbO,MAAM,IAAIA,MAAM,CAAC,UAAD,CAAhB;KAHF,MAIO;MACLR,cAAc;MACda,QAAQ,CAAC,IAAD,CAAR;MACAL,MAAM,IAAIA,MAAM,CAAC,WAAD,CAAhB;;GARJ;;EAYAnB,OAAO,CAAC6B,GAAR,CAAY,SAAZ,EAAuBT,OAAvB;EAEAtB,eAAS,CAAC,YAAM;IACd,IAAIN,QAAJ,EAAc;MACZ2B,MAAM,IAAIA,MAAM,CAAC,WAAD,CAAhB;MACAO,YAAY,CAAClC,QAAD,CAAZ;MACAsB,OAAO,IAAIA,OAAO,CAACtB,QAAD,CAAlB;;GAJK,EAON,CAACA,QAAD,CAPM,CAAT;EASA,oBACEsC;IAAK,SAAS,EAAKC,MAAM,CAACC,SAAZ,SAAyBf;KACpC,CAACC,cAAD,iBAAmBY,yCAAKd,KAAK,GAAGA,KAAH,GAAW,gBAArB,CADtB,eAEEc;IAAK,SAAS,OAAKC,MAAM,CAACE;KACvB,GADH,GAEMX,OAAO,GAAG,EAAV,SAAmBA,OAAnB,GAA+BA,OAFrC,WAGIF,OAAO,GAAG,EAAV,SAAmBA,OAAnB,GAA+BA,OAHnC,EAFF,eAQEU;IAAK,SAAS,OAAKC,MAAM,CAACG;KACvBnB,eAAe,iBACde;IAAK,SAAS,OAAKC,MAAM,CAACI;KACvBV,SAAS,iBACRK;IAAO,QAAQ;kBACbA;IAAQ,GAAG,EAAEL;IADf,CAFJ,CAFJ,eAUEK;IACE,IAAI,EAAC,QADP;IAEE,OAAO,EAAE;MAAA,OAAMF,eAAe,EAArB;;KAER,CAAClC,WAAD,GAAe,iBAAf,GAAmC,gBAJtC,CAVF,CARF,CADF;AA4BD,CA7FD;;;;"}